"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=require("lodash"),_lodash2=_interopRequireDefault(_lodash),_aphroditeNoImportant=require("aphrodite/no-important"),globalSelectorHandler=function(e,t,r){return"*"!==e[0]?null:r(t+" "+e.slice(1)+" ")},globalExtension={selectorHandler:globalSelectorHandler},_StyleSheet$extend=_aphroditeNoImportant.StyleSheet.extend([globalExtension]),newStyle=_StyleSheet$extend.StyleSheet,newCss=_StyleSheet$extend.css,css=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(e){return e._style});return newCss(n)};exports.css=css;var generateStyle=function e(t,r,n,o){for(var a in t)if("object"==typeof t[a]&&a.indexOf(":")<0&&a.indexOf("*")<0)e(t[a],a,n[r],o),delete t[a];else{var i={};i[r]={},o?i[r][o]=t:i[r]=t,i=newStyle.create(i),n[r]=i[r]}},processStyle=function(e){var t=_lodash2["default"].cloneDeep(e),r=newStyle.create(t);for(var n in r){var o=r[n]._definition;for(var a in o)if("object"==typeof o[a]&&0==a.indexOf("@")){var i=o[a];for(var l in i)if("object"==typeof i[l]&&l.indexOf(":")<0&&a.indexOf("*")<0){var s={};generateStyle(i[l],l,s,a),r[n][l]=s[l],delete r[n]._definition[a][l]}}else if("object"==typeof o[a]&&a.indexOf(":")<0&&a.indexOf("*")<0){var s={};generateStyle(o[a],a,s),r[n][a]=s[a],delete r[n]._definition[a]}}return r},setMediaPrefix=function(e,t){for(var r in e){var n={};n[t]=e[r],e[r]=n}return e},recombine=function t(e,r,n){for(var o in r)if(e[n]||(e[n]={}),"_definition"!=o&&"_name"!=o)t(e[n],r[o],o);else if("_definition"==o){e[n]._style||(e[n]._style=[]);var a={};a._definition=r._definition,a._name=r._name,e[n]._style.push(a)}},creatStyle=function(e,t,r){var n=_lodash2["default"].cloneDeep(e),o={};for(var a in n){"base"==a&&(o[a]=processStyle(n[a]));var i=n[a];for(var l in t){"base"==l&&console.error("The def param could not be use in breakpoints.--Aphrodite-style-creator");var s=t[l];a==l&&(s.media&&s.alias?o[s.alias]=processStyle(setMediaPrefix(i,s.media)):"string"==typeof s?o[a]=processStyle(setMediaPrefix(i,s)):console.error("please using param 'media' and 'alias' both in media ["+l+"]. --Aphrodite-style-creator"))}}o.base||(console.error("the base style not found. --Aphrodite-style-creator"),o=null);var f={};for(var a in o)for(var d in o[a])recombine(f,o[a][d],d);return f};exports.creatStyle=creatStyle;